@model List<Department>
@{
    ViewData["Title"] = "DeptEmps";
}

<h1 style="color:red">Employees Per Department</h1>

<select id="DeptId" name="DeptId" class="form-control" onchange="GetEmp()">

    @foreach(var deptitem in Model)
    {
        <option value="@deptitem.Id">@deptitem.Name</option>
    }
</select>





<select id="Emps" name="Emps" class="form-control">

</select>
   

<script src="/lib/jquery/dist/jquery.js"></script>

<script>
    function GetEmp(){

       var deptID =  document.getElementById("DeptId").value

        var empElement =  document.getElementById("Emps")
        empElement.innerHTML = "" ;

       console.log(deptID); 
       $.ajax({
            url: "/department/GetEmpsByDeptId?deptid=" + deptID,
            success: function(result){
                console.log(result);

                for(let emp of result)
                {
                  empElement.innerHTML += "<option value='" + emp.id + "'>" + emp.name + "</option>";
                }


            }
       });
    }


</script>